import type {
  SymbolDialogAction,
  SymbolMcdocCustomDynamicEventAdditions,
} from 'sandstone/arguments/generated/dispatcher'
import type { Registry } from 'sandstone/arguments/generated/registry'

export type ClickAction = ({
  [S in Extract<Registry['minecraft:dialog_action_type'], string>]?: ({
    type: S
  } & (S extends keyof SymbolDialogAction ? SymbolDialogAction[S] : Record<string, unknown>));
}[Registry['minecraft:dialog_action_type']])

export type DynamicCustomAction = ({
  [S in Extract<`${string}:${string}`, string>]?: {
    /**
         * ID of a custom action.
         * Has no functionality on vanilla servers.
         */
    id: S
    /**
         * Static fields added in addition to the fields generated by input.
         */
    additions?: (S extends keyof SymbolMcdocCustomDynamicEventAdditions
      ? SymbolMcdocCustomDynamicEventAdditions[S]
      : Record<string, unknown>)
  };
}[`${string}:${string}`])

export type DynamicRunCommand = {
  /**
     * A macro template to be interpred as a command.
     * Special characters (including both `'` and `"`) from text input will be escaped to fit in SNBT literal.
     */
  template: `${any}${string}`
}
